{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\itsmu\\\\Downloads\\\\twiller_complete_project\\\\frontend\\\\src\\\\components\\\\PostComposer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport API from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction highlightCaption(text) {\n  // Highlight hashtags and @mentions in blue\n  const regex = /([#@][\\w]+)/g;\n  const parts = text.split(regex);\n  return parts.map((part, i) => regex.test(part) ? /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"text-blue-500 font-semibold\",\n    children: part\n  }, i, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 9\n  }, this) : part);\n}\nexport default function PostComposer({\n  onPosted\n}) {\n  _s();\n  const [caption, setCaption] = useState(\"\");\n  const [mediaFiles, setMediaFiles] = useState([]); // Array of File\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const fileInputRef = useRef();\n  const [dragActive, setDragActive] = useState(false);\n  const [user, setUser] = useState(null);\n  const [todayCount, setTodayCount] = useState(0);\n  const [quotaInfo, setQuotaInfo] = useState({\n    allowed: 1,\n    remaining: 1,\n    reason: \"\"\n  });\n  useEffect(() => {\n    async function load() {\n      try {\n        var _u$subscription, _planMap$plan;\n        const res = await API.get(\"/auth/me\");\n        const u = res.data.user;\n        setUser(u);\n        // fetch tweets and compute today's count\n        const tweetsRes = await API.get(\"/tweets\");\n        const all = tweetsRes.data || [];\n        const myId = u === null || u === void 0 ? void 0 : u._id;\n        const today = new Date();\n        const istToday = new Date(today.toLocaleString(\"en-US\", {\n          timeZone: \"Asia/Kolkata\"\n        }));\n        const start = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 0, 0, 0);\n        const end = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 23, 59, 59);\n        const used = all.filter(t => {\n          var _t$user;\n          return ((_t$user = t.user) === null || _t$user === void 0 ? void 0 : _t$user._id) === myId && new Date(t.createdAt) >= start && new Date(t.createdAt) <= end;\n        }).length;\n        setTodayCount(used);\n\n        // compute allowed posts by subscription\n        const plan = (u === null || u === void 0 ? void 0 : (_u$subscription = u.subscription) === null || _u$subscription === void 0 ? void 0 : _u$subscription.plan) || \"free\";\n        const planMap = {\n          free: 1,\n          bronze: 3,\n          silver: 5,\n          gold: Infinity\n        };\n        let allowed = (_planMap$plan = planMap[plan]) !== null && _planMap$plan !== void 0 ? _planMap$plan : 1;\n\n        // apply follow rules (0: only 1 post between 10:00-10:30; 2-10: max 2)\n        const follows = ((u === null || u === void 0 ? void 0 : u.follows) || []).length;\n        if (follows === 0) {\n          allowed = Math.min(allowed, 1);\n        } else if (follows >= 2 && follows <= 10) {\n          allowed = Math.min(allowed, 2);\n        }\n        const remaining = allowed === Infinity ? Infinity : Math.max(0, allowed - used);\n        setQuotaInfo({\n          allowed,\n          remaining,\n          reason: \"\"\n        });\n      } catch (e) {\n        // ignore\n      }\n    }\n    load();\n  }, []);\n  function handleUploadClick() {\n    fileInputRef.current.click();\n  }\n  function handleFileChange(e) {\n    let files = Array.from(e.target.files);\n    validateAndSetFiles(files);\n  }\n  function handleDrop(e) {\n    e.preventDefault();\n    setDragActive(false);\n    let files = Array.from(e.dataTransfer.files);\n    validateAndSetFiles(files);\n  }\n  function handleDragOver(e) {\n    e.preventDefault();\n    setDragActive(true);\n  }\n  function handleDragLeave(e) {\n    e.preventDefault();\n    setDragActive(false);\n  }\n  function validateAndSetFiles(files) {\n    setError(\"\");\n    let images = files.filter(f => f.type.startsWith(\"image\"));\n    let videos = files.filter(f => f.type.startsWith(\"video\"));\n    if (videos.length > 1 || videos.length && images.length) {\n      setError(\"You can upload up to 4 images or 1 video only.\");\n      return;\n    }\n    if (images.length > 4) {\n      setError(\"Maximum 4 images allowed.\");\n      return;\n    }\n    for (let img of images) {\n      if (img.size > 5 * 1024 * 1024) {\n        setError(\"Each image must be ≤ 5MB.\");\n        return;\n      }\n    }\n    for (let vid of videos) {\n      if (vid.size > 100 * 1024 * 1024) {\n        setError(\"Video must be ≤ 100MB.\");\n        return;\n      }\n    }\n    setMediaFiles([...images, ...videos]);\n  }\n  function removeMedia(idx) {\n    setMediaFiles(mediaFiles.filter((_, i) => i !== idx));\n  }\n  function handleCaptionChange(e) {\n    setCaption(e.target.value);\n  }\n  async function post() {\n    setLoading(true);\n    setError(\"\");\n    // Check quota and time window for 0-followers\n    try {\n      const now = new Date();\n      const istNow = new Date(now.toLocaleString(\"en-US\", {\n        timeZone: \"Asia/Kolkata\"\n      }));\n      const hour = istNow.getHours();\n      const follows = ((user === null || user === void 0 ? void 0 : user.follows) || []).length;\n      if (follows === 0) {\n        // only 10:00 - 10:30 allowed\n        const minAllowed = 10;\n        const maxAllowed = 10;\n        const minute = istNow.getMinutes();\n        if (!(hour === 10 && minute >= 0 && minute <= 30)) {\n          setError(\"Users who follow nobody can post only between 10:00-10:30 IST\");\n          setLoading(false);\n          return;\n        }\n      }\n      if (quotaInfo.remaining !== Infinity && quotaInfo.remaining <= 0) {\n        setError(\"You have reached your posting limit for today.\");\n        setLoading(false);\n        return;\n      }\n    } catch (e) {\n      // proceed\n    }\n    try {\n      var _res2$data$user, _res2$data$user2, _res2$data$user2$subs, _planMap$plan2, _res2$data$user3;\n      const fd = new FormData();\n      fd.append(\"text\", caption);\n      if (mediaFiles && mediaFiles.length) {\n        for (const f of mediaFiles) fd.append(\"media\", f);\n      }\n      await API.post(\"/tweets\", fd, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      setCaption(\"\");\n      setMediaFiles([]);\n      onPosted && onPosted();\n      // refresh quota\n      const res2 = await API.get(\"/auth/me\");\n      const tweetsRes = await API.get(\"/tweets\");\n      const all = tweetsRes.data || [];\n      const myId = (_res2$data$user = res2.data.user) === null || _res2$data$user === void 0 ? void 0 : _res2$data$user._id;\n      const today = new Date();\n      const istToday = new Date(today.toLocaleString(\"en-US\", {\n        timeZone: \"Asia/Kolkata\"\n      }));\n      const start = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 0, 0, 0);\n      const end = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 23, 59, 59);\n      const used = all.filter(t => {\n        var _t$user2;\n        return ((_t$user2 = t.user) === null || _t$user2 === void 0 ? void 0 : _t$user2._id) === myId && new Date(t.createdAt) >= start && new Date(t.createdAt) <= end;\n      }).length;\n      const plan = ((_res2$data$user2 = res2.data.user) === null || _res2$data$user2 === void 0 ? void 0 : (_res2$data$user2$subs = _res2$data$user2.subscription) === null || _res2$data$user2$subs === void 0 ? void 0 : _res2$data$user2$subs.plan) || \"free\";\n      const planMap = {\n        free: 1,\n        bronze: 3,\n        silver: 5,\n        gold: Infinity\n      };\n      let allowed = (_planMap$plan2 = planMap[plan]) !== null && _planMap$plan2 !== void 0 ? _planMap$plan2 : 1;\n      const follows = (((_res2$data$user3 = res2.data.user) === null || _res2$data$user3 === void 0 ? void 0 : _res2$data$user3.follows) || []).length;\n      if (follows === 0) allowed = Math.min(allowed, 1);else if (follows >= 2 && follows <= 10) allowed = Math.min(allowed, 2);\n      const remaining = allowed === Infinity ? Infinity : Math.max(0, allowed - used);\n      setTodayCount(used);\n      setQuotaInfo({\n        allowed,\n        remaining,\n        reason: \"\"\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message);\n    }\n    setLoading(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"composer bg-white rounded-xl shadow-lg p-4 flex flex-col gap-4 max-w-xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `border-2 ${dragActive ? \"border-blue-400 bg-blue-50\" : \"border-dashed border-gray-300\"} rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition mb-2 relative`,\n      onClick: handleUploadClick,\n      onDrop: handleDrop,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      style: {\n        minHeight: \"120px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        multiple: true,\n        accept: \"image/*,video/*\",\n        ref: fileInputRef,\n        style: {\n          display: \"none\"\n        },\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"px-5 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition mb-2\",\n        children: \"Upload Media\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-gray-400 text-sm\",\n        children: \"Drag & drop images (max 4) or 1 video here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-500 text-sm mb-2\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }, this), mediaFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2\",\n      children: mediaFiles[0].type.startsWith(\"image\") ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-3\",\n        children: mediaFiles.map((file, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative group\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: URL.createObjectURL(file),\n            alt: \"preview\",\n            className: \"rounded-lg shadow border border-gray-200 object-cover w-full h-32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: e => {\n              e.stopPropagation();\n              removeMedia(idx);\n            },\n            className: \"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow group-hover:scale-110 transition\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 19\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          src: URL.createObjectURL(mediaFiles[0]),\n          controls: true,\n          className: \"rounded-lg shadow border border-gray-200 w-full h-48 object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: e => {\n            e.stopPropagation();\n            removeMedia(0);\n          },\n          className: \"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow transition\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: caption,\n      onChange: handleCaptionChange,\n      placeholder: \"Write a caption\\u2026\",\n      className: \"w-full rounded-2xl border border-gray-300 p-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-300 resize-none mb-2\",\n      rows: 2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), caption && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2 text-base\",\n      children: highlightCaption(caption)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-gray-600 mb-2\",\n      children: quotaInfo.allowed === Infinity ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Plan: Unlimited tweets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Today: \", todayCount, \"/\", quotaInfo.allowed, \" \\u2014 Remaining: \", quotaInfo.remaining]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: post,\n      disabled: loading || !caption.trim() && mediaFiles.length === 0,\n      className: \"self-end px-6 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition flex items-center gap-2\",\n      children: [loading && /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"animate-spin h-5 w-5 text-white\",\n        viewBox: \"0 0 24 24\",\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          className: \"opacity-25\",\n          cx: \"12\",\n          cy: \"12\",\n          r: \"10\",\n          stroke: \"currentColor\",\n          strokeWidth: \"4\",\n          fill: \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          className: \"opacity-75\",\n          fill: \"currentColor\",\n          d: \"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this), \"Tweet\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this);\n}\n_s(PostComposer, \"sKDmKXTEGVv+pwu2fVsNxByx3ho=\");\n_c = PostComposer;\nvar _c;\n$RefreshReg$(_c, \"PostComposer\");","map":{"version":3,"names":["React","useRef","useState","useEffect","API","jsxDEV","_jsxDEV","highlightCaption","text","regex","parts","split","map","part","i","test","className","children","fileName","_jsxFileName","lineNumber","columnNumber","PostComposer","onPosted","_s","caption","setCaption","mediaFiles","setMediaFiles","error","setError","loading","setLoading","fileInputRef","dragActive","setDragActive","user","setUser","todayCount","setTodayCount","quotaInfo","setQuotaInfo","allowed","remaining","reason","load","_u$subscription","_planMap$plan","res","get","u","data","tweetsRes","all","myId","_id","today","Date","istToday","toLocaleString","timeZone","start","getFullYear","getMonth","getDate","end","used","filter","t","_t$user","createdAt","length","plan","subscription","planMap","free","bronze","silver","gold","Infinity","follows","Math","min","max","e","handleUploadClick","current","click","handleFileChange","files","Array","from","target","validateAndSetFiles","handleDrop","preventDefault","dataTransfer","handleDragOver","handleDragLeave","images","f","type","startsWith","videos","img","size","vid","removeMedia","idx","_","handleCaptionChange","value","post","now","istNow","hour","getHours","minAllowed","maxAllowed","minute","getMinutes","_res2$data$user","_res2$data$user2","_res2$data$user2$subs","_planMap$plan2","_res2$data$user3","fd","FormData","append","headers","res2","_t$user2","err","_err$response","_err$response$data","response","message","onClick","onDrop","onDragOver","onDragLeave","style","minHeight","multiple","accept","ref","display","onChange","file","src","URL","createObjectURL","alt","stopPropagation","controls","placeholder","rows","disabled","trim","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","_c","$RefreshReg$"],"sources":["C:/Users/itsmu/Downloads/twiller_complete_project/frontend/src/components/PostComposer.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport API from \"../api\";\n\nfunction highlightCaption(text) {\n  // Highlight hashtags and @mentions in blue\n  const regex = /([#@][\\w]+)/g;\n  const parts = text.split(regex);\n  return parts.map((part, i) =>\n    regex.test(part)\n      ? <span key={i} className=\"text-blue-500 font-semibold\">{part}</span>\n      : part\n  );\n}\n\nexport default function PostComposer({ onPosted }) {\n  const [caption, setCaption] = useState(\"\");\n  const [mediaFiles, setMediaFiles] = useState([]); // Array of File\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const fileInputRef = useRef();\n  const [dragActive, setDragActive] = useState(false);\n  const [user, setUser] = useState(null);\n  const [todayCount, setTodayCount] = useState(0);\n  const [quotaInfo, setQuotaInfo] = useState({ allowed: 1, remaining: 1, reason: \"\" });\n\n  useEffect(() => {\n    async function load() {\n      try {\n        const res = await API.get(\"/auth/me\");\n        const u = res.data.user;\n        setUser(u);\n        // fetch tweets and compute today's count\n        const tweetsRes = await API.get(\"/tweets\");\n        const all = tweetsRes.data || [];\n        const myId = u?._id;\n        const today = new Date();\n        const istToday = new Date(today.toLocaleString(\"en-US\", { timeZone: \"Asia/Kolkata\" }));\n        const start = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 0, 0, 0);\n        const end = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 23, 59, 59);\n        const used = all.filter(t => t.user?._id === myId && new Date(t.createdAt) >= start && new Date(t.createdAt) <= end).length;\n        setTodayCount(used);\n\n        // compute allowed posts by subscription\n        const plan = u?.subscription?.plan || \"free\";\n        const planMap = { free: 1, bronze: 3, silver: 5, gold: Infinity };\n        let allowed = planMap[plan] ?? 1;\n\n        // apply follow rules (0: only 1 post between 10:00-10:30; 2-10: max 2)\n        const follows = (u?.follows || []).length;\n        if (follows === 0) {\n          allowed = Math.min(allowed, 1);\n        } else if (follows >= 2 && follows <= 10) {\n          allowed = Math.min(allowed, 2);\n        }\n\n        const remaining = allowed === Infinity ? Infinity : Math.max(0, allowed - used);\n        setQuotaInfo({ allowed, remaining, reason: \"\" });\n      } catch (e) {\n        // ignore\n      }\n    }\n    load();\n  }, []);\n\n  function handleUploadClick() {\n    fileInputRef.current.click();\n  }\n\n  function handleFileChange(e) {\n    let files = Array.from(e.target.files);\n    validateAndSetFiles(files);\n  }\n\n  function handleDrop(e) {\n    e.preventDefault();\n    setDragActive(false);\n    let files = Array.from(e.dataTransfer.files);\n    validateAndSetFiles(files);\n  }\n\n  function handleDragOver(e) {\n    e.preventDefault();\n    setDragActive(true);\n  }\n\n  function handleDragLeave(e) {\n    e.preventDefault();\n    setDragActive(false);\n  }\n\n  function validateAndSetFiles(files) {\n    setError(\"\");\n    let images = files.filter(f => f.type.startsWith(\"image\"));\n    let videos = files.filter(f => f.type.startsWith(\"video\"));\n    if (videos.length > 1 || (videos.length && images.length)) {\n      setError(\"You can upload up to 4 images or 1 video only.\");\n      return;\n    }\n    if (images.length > 4) {\n      setError(\"Maximum 4 images allowed.\");\n      return;\n    }\n    for (let img of images) {\n      if (img.size > 5 * 1024 * 1024) {\n        setError(\"Each image must be ≤ 5MB.\");\n        return;\n      }\n    }\n    for (let vid of videos) {\n      if (vid.size > 100 * 1024 * 1024) {\n        setError(\"Video must be ≤ 100MB.\");\n        return;\n      }\n    }\n    setMediaFiles([...images, ...videos]);\n  }\n\n  function removeMedia(idx) {\n    setMediaFiles(mediaFiles.filter((_, i) => i !== idx));\n  }\n\n  function handleCaptionChange(e) {\n    setCaption(e.target.value);\n  }\n\n  async function post() {\n    setLoading(true);\n    setError(\"\");\n    // Check quota and time window for 0-followers\n    try {\n      const now = new Date();\n      const istNow = new Date(now.toLocaleString(\"en-US\", { timeZone: \"Asia/Kolkata\" }));\n      const hour = istNow.getHours();\n      const follows = (user?.follows || []).length;\n      if (follows === 0) {\n        // only 10:00 - 10:30 allowed\n        const minAllowed = 10;\n        const maxAllowed = 10;\n        const minute = istNow.getMinutes();\n        if (!(hour === 10 && minute >= 0 && minute <= 30)) {\n          setError(\"Users who follow nobody can post only between 10:00-10:30 IST\");\n          setLoading(false);\n          return;\n        }\n      }\n      if (quotaInfo.remaining !== Infinity && quotaInfo.remaining <= 0) {\n        setError(\"You have reached your posting limit for today.\");\n        setLoading(false);\n        return;\n      }\n    } catch (e) {\n      // proceed\n    }\n    try {\n      const fd = new FormData();\n      fd.append(\"text\", caption);\n      if (mediaFiles && mediaFiles.length) {\n        for (const f of mediaFiles) fd.append(\"media\", f);\n      }\n      await API.post(\"/tweets\", fd, { headers: { \"Content-Type\": \"multipart/form-data\" } });\n      setCaption(\"\");\n      setMediaFiles([]);\n      onPosted && onPosted();\n      // refresh quota\n      const res2 = await API.get(\"/auth/me\");\n      const tweetsRes = await API.get(\"/tweets\");\n      const all = tweetsRes.data || [];\n      const myId = res2.data.user?._id;\n      const today = new Date();\n      const istToday = new Date(today.toLocaleString(\"en-US\", { timeZone: \"Asia/Kolkata\" }));\n      const start = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 0, 0, 0);\n      const end = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 23, 59, 59);\n      const used = all.filter(t => t.user?._id === myId && new Date(t.createdAt) >= start && new Date(t.createdAt) <= end).length;\n      const plan = res2.data.user?.subscription?.plan || \"free\";\n      const planMap = { free: 1, bronze: 3, silver: 5, gold: Infinity };\n      let allowed = planMap[plan] ?? 1;\n      const follows = (res2.data.user?.follows || []).length;\n      if (follows === 0) allowed = Math.min(allowed, 1);\n      else if (follows >= 2 && follows <= 10) allowed = Math.min(allowed, 2);\n      const remaining = allowed === Infinity ? Infinity : Math.max(0, allowed - used);\n      setTodayCount(used);\n      setQuotaInfo({ allowed, remaining, reason: \"\" });\n    } catch (err) {\n      setError(err.response?.data?.message || err.message);\n    }\n    setLoading(false);\n  }\n\n  return (\n    <div className=\"composer bg-white rounded-xl shadow-lg p-4 flex flex-col gap-4 max-w-xl mx-auto\">\n      <div\n        className={`border-2 ${dragActive ? \"border-blue-400 bg-blue-50\" : \"border-dashed border-gray-300\"} rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition mb-2 relative`}\n        onClick={handleUploadClick}\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        style={{ minHeight: \"120px\" }}\n      >\n        <input\n          type=\"file\"\n          multiple\n          accept=\"image/*,video/*\"\n          ref={fileInputRef}\n          style={{ display: \"none\" }}\n          onChange={handleFileChange}\n        />\n        <button\n          type=\"button\"\n          className=\"px-5 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition mb-2\"\n        >\n          Upload Media\n        </button>\n        <span className=\"text-gray-400 text-sm\">Drag & drop images (max 4) or 1 video here</span>\n      </div>\n      {error && <div className=\"text-red-500 text-sm mb-2\">{error}</div>}\n      {mediaFiles.length > 0 && (\n        <div className=\"mb-2\">\n          {/* Image grid or video preview */}\n          {mediaFiles[0].type.startsWith(\"image\") ? (\n            <div className=\"grid grid-cols-2 gap-3\">\n              {mediaFiles.map((file, idx) => (\n                <div key={idx} className=\"relative group\">\n                  <img\n                    src={URL.createObjectURL(file)}\n                    alt=\"preview\"\n                    className=\"rounded-lg shadow border border-gray-200 object-cover w-full h-32\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={e => { e.stopPropagation(); removeMedia(idx); }}\n                    className=\"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow group-hover:scale-110 transition\"\n                  >\n                    ×\n                  </button>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"relative\">\n              <video\n                src={URL.createObjectURL(mediaFiles[0])}\n                controls\n                className=\"rounded-lg shadow border border-gray-200 w-full h-48 object-cover\"\n              />\n              <button\n                type=\"button\"\n                onClick={e => { e.stopPropagation(); removeMedia(0); }}\n                className=\"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow transition\"\n              >\n                ×\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n      <textarea\n        value={caption}\n        onChange={handleCaptionChange}\n        placeholder=\"Write a caption…\"\n        className=\"w-full rounded-2xl border border-gray-300 p-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-300 resize-none mb-2\"\n        rows={2}\n      ></textarea>\n      {/* Hashtag/@mention highlight preview */}\n      {caption && (\n        <div className=\"mb-2 text-base\">\n          {highlightCaption(caption)}\n        </div>\n      )}\n      {/* Quota display */}\n      <div className=\"text-sm text-gray-600 mb-2\">\n        {quotaInfo.allowed === Infinity ? (\n          <span>Plan: Unlimited tweets</span>\n        ) : (\n          <span>Today: {todayCount}/{quotaInfo.allowed} &mdash; Remaining: {quotaInfo.remaining}</span>\n        )}\n      </div>\n      <button\n        onClick={post}\n        disabled={loading || (!caption.trim() && mediaFiles.length === 0)}\n        className=\"self-end px-6 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition flex items-center gap-2\"\n      >\n        {loading && (\n          <svg className=\"animate-spin h-5 w-5 text-white\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z\" />\n          </svg>\n        )}\n        Tweet\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}