{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import ProfileSettings from\"../components/ProfileSettings\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var _user$email,_user$subscription,_user$subscription2;const[user,setUser]=useState(null);const[notificationsEnabled,setNotificationsEnabled]=useState(true);const[tweets,setTweets]=useState([]);useEffect(()=>{async function load(){try{var _res$data$notificatio;const res=await API.get(\"/auth/me\");setUser(res.data.user);setNotificationsEnabled((_res$data$notificatio=res.data.notificationsEnabled)!==null&&_res$data$notificatio!==void 0?_res$data$notificatio:true);// fetch recent tweets by user\nconst t=await API.get(\"/tweets\");setTweets((t.data||[]).filter(x=>x.user&&x.user._id===res.data.user._id));}catch(e){// Log error for debugging (avoid empty block so ESLint no-empty doesn't trigger)\nconsole.debug(e);}}load();},[]);async function handleNotificationChange(enabled){setNotificationsEnabled(enabled);try{await API.post(\"/auth/notifications\",{enabled});}catch(e){}}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-2xl mx-auto py-6\",children:[/*#__PURE__*/_jsx(ProfileSettings,{notificationsEnabled:notificationsEnabled,onNotificationChange:handleNotificationChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 mb-6 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:(user===null||user===void 0?void 0:user.avatar)||\"https://ui-avatars.com/api/?name=Twiller+User&background=0D8ABC&color=fff\",alt:\"avatar\",className:\"w-24 h-24 rounded-full shadow mb-3 object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 flex gap-2\",children:/*#__PURE__*/_jsx(\"label\",{className:\"cursor-pointer bg-white border border-gray-200 rounded-full px-3 py-1 text-sm font-semibold\",children:\"Change Photo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-blue-700\",children:(user===null||user===void 0?void 0:user.name)||(user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.split(\"@\")[0])||\"Twiller User\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:user===null||user===void 0?void 0:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-400 text-sm\",children:[\"Joined \",new Date((user===null||user===void 0?void 0:user.createdAt)||Date.now()).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Plan:\"}),\" \",(user===null||user===void 0?void 0:(_user$subscription=user.subscription)===null||_user$subscription===void 0?void 0:_user$subscription.plan)||\"free\",\" \",(user===null||user===void 0?void 0:(_user$subscription2=user.subscription)===null||_user$subscription2===void 0?void 0:_user$subscription2.plan)===\"gold\"?\"(Unlimited)\":\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-lg mb-4 text-blue-700\",children:\"Your Tweets\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"flex flex-col gap-3\",children:[tweets.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"You have not posted any tweets yet.\"}),tweets.map(t=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-gray-50 px-4 py-2 rounded-lg shadow border border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:t.text}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-xs\",children:new Date(t.createdAt).toLocaleString()})]},t._id))]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","ProfileSettings","API","jsx","_jsx","jsxs","_jsxs","Profile","_user$email","_user$subscription","_user$subscription2","user","setUser","notificationsEnabled","setNotificationsEnabled","tweets","setTweets","load","_res$data$notificatio","res","get","data","t","filter","x","_id","e","console","debug","handleNotificationChange","enabled","post","className","children","onNotificationChange","src","avatar","alt","name","email","split","Date","createdAt","now","toLocaleDateString","subscription","plan","length","map","text","toLocaleString"],"sources":["C:/Users/itsmu/Downloads/twiller_complete_project/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ProfileSettings from \"../components/ProfileSettings\";\r\nimport API from \"../api\";\r\n\r\nexport default function Profile() {\r\n  const [user, setUser] = useState(null);\r\n  const [notificationsEnabled, setNotificationsEnabled] = useState(true);\r\n  const [tweets, setTweets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      try {\r\n        const res = await API.get(\"/auth/me\");\r\n        setUser(res.data.user);\r\n        setNotificationsEnabled(res.data.notificationsEnabled ?? true);\r\n        // fetch recent tweets by user\r\n        const t = await API.get(\"/tweets\");\r\n        setTweets((t.data || []).filter(x => x.user && x.user._id === res.data.user._id));\r\n      } catch (e) {\r\n        // Log error for debugging (avoid empty block so ESLint no-empty doesn't trigger)\r\n        console.debug(e);\r\n      }\r\n    }\r\n    load();\r\n  }, []);\r\n\r\n  async function handleNotificationChange(enabled) {\r\n    setNotificationsEnabled(enabled);\r\n    try { await API.post(\"/auth/notifications\", { enabled }); } catch (e) {}\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl mx-auto py-6\">\r\n      <ProfileSettings notificationsEnabled={notificationsEnabled} onNotificationChange={handleNotificationChange} />\r\n\r\n      <div className=\"bg-white rounded-xl shadow p-6 mb-6 flex flex-col items-center\">\r\n        <img src={user?.avatar || \"https://ui-avatars.com/api/?name=Twiller+User&background=0D8ABC&color=fff\"} alt=\"avatar\" className=\"w-24 h-24 rounded-full shadow mb-3 object-cover\" />\r\n        <div className=\"mb-2 flex gap-2\">\r\n          <label className=\"cursor-pointer bg-white border border-gray-200 rounded-full px-3 py-1 text-sm font-semibold\">Change Photo</label>\r\n        </div>\r\n  <div className=\"text-lg font-bold text-blue-700\">{user?.name || user?.email?.split(\"@\")[0] || \"Twiller User\"}</div>\r\n        <div className=\"text-gray-500\">{user?.email}</div>\r\n        <div className=\"text-gray-400 text-sm\">Joined {new Date(user?.createdAt || Date.now()).toLocaleDateString()}</div>\r\n        <div className=\"mt-3 text-sm text-gray-600\">\r\n          <strong>Plan:</strong> {user?.subscription?.plan || \"free\"} {user?.subscription?.plan === \"gold\" ? \"(Unlimited)\" : \"\"}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow p-6\">\r\n        <h2 className=\"font-bold text-lg mb-4 text-blue-700\">Your Tweets</h2>\r\n        <ul className=\"flex flex-col gap-3\">\r\n          {tweets.length === 0 && <div className=\"text-sm text-gray-500\">You have not posted any tweets yet.</div>}\r\n          {tweets.map(t => (\r\n            <li key={t._id} className=\"bg-gray-50 px-4 py-2 rounded-lg shadow border border-gray-100\">\r\n              <div className=\"font-medium\">{t.text}</div>\r\n              <div className=\"text-gray-400 text-xs\">{new Date(t.createdAt).toLocaleString()}</div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}