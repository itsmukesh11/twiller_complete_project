{"ast":null,"code":"import React,{useRef,useState,useEffect,useContext}from\"react\";import API from\"../api\";import NotificationContext from\"../notificationContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function highlightCaption(text){// Highlight hashtags and @mentions in blue\nconst regex=/([#@][\\w]+)/g;const parts=text.split(regex);return parts.map((part,i)=>regex.test(part)?/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500 font-semibold\",children:part},i):part);}export default function PostComposer(_ref){let{onPosted}=_ref;const{enabled:notificationsEnabled}=useContext(NotificationContext);const[caption,setCaption]=useState(\"\");const[mediaFiles,setMediaFiles]=useState([]);// Array of File\nconst[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const fileInputRef=useRef();const[dragActive,setDragActive]=useState(false);const[user,setUser]=useState(null);const[todayCount,setTodayCount]=useState(0);const[quotaInfo,setQuotaInfo]=useState({allowed:1,remaining:1,reason:\"\"});useEffect(()=>{async function load(){try{var _u$subscription,_planMap$plan;const res=await API.get(\"/auth/me\");const u=res.data.user;setUser(u);// fetch tweets and compute today's count\nconst tweetsRes=await API.get(\"/tweets\");const all=tweetsRes.data||[];const myId=u===null||u===void 0?void 0:u._id;const today=new Date();const istToday=new Date(today.toLocaleString(\"en-US\",{timeZone:\"Asia/Kolkata\"}));const start=new Date(istToday.getFullYear(),istToday.getMonth(),istToday.getDate(),0,0,0);const end=new Date(istToday.getFullYear(),istToday.getMonth(),istToday.getDate(),23,59,59);const used=all.filter(t=>{var _t$user;return((_t$user=t.user)===null||_t$user===void 0?void 0:_t$user._id)===myId&&new Date(t.createdAt)>=start&&new Date(t.createdAt)<=end;}).length;setTodayCount(used);// compute allowed posts by subscription\nconst plan=(u===null||u===void 0?void 0:(_u$subscription=u.subscription)===null||_u$subscription===void 0?void 0:_u$subscription.plan)||\"free\";const planMap={free:1,bronze:3,silver:5,gold:Infinity};let allowedByPlan=(_planMap$plan=planMap[plan])!==null&&_planMap$plan!==void 0?_planMap$plan:1;// follow-based allowances\nconst follows=((u===null||u===void 0?void 0:u.follows)||[]).length;let allowedByFollows=0;if(follows===0){allowedByFollows=1;// limited to 1 but time-window enforced on post\n}else if(follows===2){allowedByFollows=2;}else if(follows>10){allowedByFollows=Infinity;}const allowed=allowedByFollows===0?allowedByPlan:Math.max(allowedByPlan,allowedByFollows);const remaining=allowed===Infinity?Infinity:Math.max(0,allowed-used);setQuotaInfo({allowed,remaining,reason:\"\"});}catch(e){// ignore\n}}load();},[]);function handleUploadClick(){fileInputRef.current.click();}function handleFileChange(e){let files=Array.from(e.target.files);validateAndSetFiles(files);}function handleDrop(e){e.preventDefault();setDragActive(false);let files=Array.from(e.dataTransfer.files);validateAndSetFiles(files);}function handleDragOver(e){e.preventDefault();setDragActive(true);}function handleDragLeave(e){e.preventDefault();setDragActive(false);}function validateAndSetFiles(files){setError(\"\");let images=files.filter(f=>f.type.startsWith(\"image\"));let videos=files.filter(f=>f.type.startsWith(\"video\"));if(videos.length>1||videos.length&&images.length){setError(\"You can upload up to 4 images or 1 video only.\");return;}if(images.length>4){setError(\"Maximum 4 images allowed.\");return;}for(let img of images){if(img.size>5*1024*1024){setError(\"Each image must be ≤ 5MB.\");return;}}for(let vid of videos){if(vid.size>100*1024*1024){setError(\"Video must be ≤ 100MB.\");return;}}setMediaFiles([...images,...videos]);}function removeMedia(idx){setMediaFiles(mediaFiles.filter((_,i)=>i!==idx));}function handleCaptionChange(e){setCaption(e.target.value);}async function post(){setLoading(true);setError(\"\");// Check quota and time window for 0-followers\ntry{const now=new Date();const istNow=new Date(now.toLocaleString(\"en-US\",{timeZone:\"Asia/Kolkata\"}));const hour=istNow.getHours();const follows=((user===null||user===void 0?void 0:user.follows)||[]).length;if(follows===0){// only 10:00 - 10:30 allowed\nconst minute=istNow.getMinutes();if(!(hour===10&&minute>=0&&minute<=30)){setError(\"Users who follow nobody can post only between 10:00-10:30 IST\");setLoading(false);return;}}if(quotaInfo.remaining!==Infinity&&quotaInfo.remaining<=0){setError(\"You have reached your posting limit for today.\");setLoading(false);return;}}catch(e){// proceed\n}try{var _res2$data$user,_res2$data$user2,_res2$data$user2$subs,_planMap$plan2,_res2$data$user3;const fd=new FormData();fd.append(\"text\",caption);if(mediaFiles&&mediaFiles.length){for(const f of mediaFiles)fd.append(\"media\",f);}const res=await API.post(\"/tweets\",fd);// Show browser notification if backend signals notify or text contains keywords\ntry{const shouldNotify=res.data&&res.data.notify||caption&&/(cricket|science)/i.test(caption);if(notificationsEnabled&&shouldNotify&&typeof Notification!==\"undefined\"&&Notification.permission===\"granted\"){new Notification(\"New Tweet\",{body:caption||\"New tweet posted\"});}}catch(e){console.debug(\"Notification error\",e);}setCaption(\"\");setMediaFiles([]);onPosted&&onPosted();// refresh quota\nconst res2=await API.get(\"/auth/me\");const tweetsRes=await API.get(\"/tweets\");const all=tweetsRes.data||[];const myId=(_res2$data$user=res2.data.user)===null||_res2$data$user===void 0?void 0:_res2$data$user._id;const today=new Date();const istToday=new Date(today.toLocaleString(\"en-US\",{timeZone:\"Asia/Kolkata\"}));const start=new Date(istToday.getFullYear(),istToday.getMonth(),istToday.getDate(),0,0,0);const end=new Date(istToday.getFullYear(),istToday.getMonth(),istToday.getDate(),23,59,59);const used=all.filter(t=>{var _t$user2;return((_t$user2=t.user)===null||_t$user2===void 0?void 0:_t$user2._id)===myId&&new Date(t.createdAt)>=start&&new Date(t.createdAt)<=end;}).length;const plan=((_res2$data$user2=res2.data.user)===null||_res2$data$user2===void 0?void 0:(_res2$data$user2$subs=_res2$data$user2.subscription)===null||_res2$data$user2$subs===void 0?void 0:_res2$data$user2$subs.plan)||\"free\";const planMap={free:1,bronze:3,silver:5,gold:Infinity};let allowed=(_planMap$plan2=planMap[plan])!==null&&_planMap$plan2!==void 0?_planMap$plan2:1;const follows=(((_res2$data$user3=res2.data.user)===null||_res2$data$user3===void 0?void 0:_res2$data$user3.follows)||[]).length;if(follows===0)allowed=Math.min(allowed,1);else if(follows>=2&&follows<=10)allowed=Math.min(allowed,2);const remaining=allowed===Infinity?Infinity:Math.max(0,allowed-used);setTodayCount(used);setQuotaInfo({allowed,remaining,reason:\"\"});}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message);}setLoading(false);}return/*#__PURE__*/_jsxs(\"div\",{className:\"composer bg-white rounded-xl shadow-lg p-4 flex flex-col gap-4 max-w-xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 \".concat(dragActive?\"border-blue-400 bg-blue-50\":\"border-dashed border-gray-300\",\" rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition mb-2 relative\"),onClick:handleUploadClick,onDrop:handleDrop,onDragOver:handleDragOver,onDragLeave:handleDragLeave,style:{minHeight:\"120px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,accept:\"image/*,video/*\",ref:fileInputRef,style:{display:\"none\"},onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-5 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition mb-2\",children:\"Upload Media\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-sm\",children:\"Drag & drop images (max 4) or 1 video here\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-sm mb-2\",children:error}),mediaFiles.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:mediaFiles[0].type.startsWith(\"image\")?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3\",children:mediaFiles.map((file,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"preview\",className:\"rounded-lg shadow border border-gray-200 object-cover w-full h-32\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();removeMedia(idx);},className:\"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow group-hover:scale-110 transition\",children:\"\\xD7\"})]},idx))}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"video\",{src:URL.createObjectURL(mediaFiles[0]),controls:true,className:\"rounded-lg shadow border border-gray-200 w-full h-48 object-cover\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();removeMedia(0);},className:\"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow transition\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsx(\"textarea\",{value:caption,onChange:handleCaptionChange,placeholder:\"Write a caption\\u2026\",className:\"w-full rounded-2xl border border-gray-300 p-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-300 resize-none mb-2\",rows:2}),caption&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 text-base\",children:highlightCaption(caption)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 mb-2\",children:quotaInfo.allowed===Infinity?/*#__PURE__*/_jsx(\"span\",{children:\"Plan: Unlimited tweets\"}):/*#__PURE__*/_jsxs(\"span\",{children:[\"Today: \",todayCount,\"/\",quotaInfo.allowed,\" \\u2014 Remaining: \",quotaInfo.remaining]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:post,disabled:loading||!caption.trim()&&mediaFiles.length===0||quotaInfo.remaining!==Infinity&&quotaInfo.remaining<=0,className:\"self-end px-6 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition flex items-center gap-2\",children:[loading&&/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 text-white\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\",fill:\"none\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z\"})]}),\"Tweet\"]})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","useContext","API","NotificationContext","jsx","_jsx","jsxs","_jsxs","highlightCaption","text","regex","parts","split","map","part","i","test","className","children","PostComposer","_ref","onPosted","enabled","notificationsEnabled","caption","setCaption","mediaFiles","setMediaFiles","error","setError","loading","setLoading","fileInputRef","dragActive","setDragActive","user","setUser","todayCount","setTodayCount","quotaInfo","setQuotaInfo","allowed","remaining","reason","load","_u$subscription","_planMap$plan","res","get","u","data","tweetsRes","all","myId","_id","today","Date","istToday","toLocaleString","timeZone","start","getFullYear","getMonth","getDate","end","used","filter","t","_t$user","createdAt","length","plan","subscription","planMap","free","bronze","silver","gold","Infinity","allowedByPlan","follows","allowedByFollows","Math","max","e","handleUploadClick","current","click","handleFileChange","files","Array","from","target","validateAndSetFiles","handleDrop","preventDefault","dataTransfer","handleDragOver","handleDragLeave","images","f","type","startsWith","videos","img","size","vid","removeMedia","idx","_","handleCaptionChange","value","post","now","istNow","hour","getHours","minute","getMinutes","_res2$data$user","_res2$data$user2","_res2$data$user2$subs","_planMap$plan2","_res2$data$user3","fd","FormData","append","shouldNotify","notify","Notification","permission","body","console","debug","res2","_t$user2","min","err","_err$response","_err$response$data","response","message","concat","onClick","onDrop","onDragOver","onDragLeave","style","minHeight","multiple","accept","ref","display","onChange","file","src","URL","createObjectURL","alt","stopPropagation","controls","placeholder","rows","disabled","trim","viewBox","cx","cy","r","stroke","strokeWidth","fill","d"],"sources":["C:/Users/itsmu/twiller_complete_project/frontend/src/components/PostComposer.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect, useContext } from \"react\";\r\nimport API from \"../api\";\r\nimport NotificationContext from \"../notificationContext\";\r\n\r\nfunction highlightCaption(text) {\r\n  // Highlight hashtags and @mentions in blue\r\n  const regex = /([#@][\\w]+)/g;\r\n  const parts = text.split(regex);\r\n  return parts.map((part, i) =>\r\n    regex.test(part)\r\n      ? <span key={i} className=\"text-blue-500 font-semibold\">{part}</span>\r\n      : part\r\n  );\r\n}\r\n\r\nexport default function PostComposer({ onPosted }) {\r\n  const { enabled: notificationsEnabled } = useContext(NotificationContext);\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [mediaFiles, setMediaFiles] = useState([]); // Array of File\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const fileInputRef = useRef();\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [todayCount, setTodayCount] = useState(0);\r\n  const [quotaInfo, setQuotaInfo] = useState({ allowed: 1, remaining: 1, reason: \"\" });\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      try {\r\n        const res = await API.get(\"/auth/me\");\r\n        const u = res.data.user;\r\n        setUser(u);\r\n        // fetch tweets and compute today's count\r\n        const tweetsRes = await API.get(\"/tweets\");\r\n        const all = tweetsRes.data || [];\r\n        const myId = u?._id;\r\n        const today = new Date();\r\n        const istToday = new Date(today.toLocaleString(\"en-US\", { timeZone: \"Asia/Kolkata\" }));\r\n        const start = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 0, 0, 0);\r\n        const end = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 23, 59, 59);\r\n        const used = all.filter(t => t.user?._id === myId && new Date(t.createdAt) >= start && new Date(t.createdAt) <= end).length;\r\n        setTodayCount(used);\r\n\r\n        // compute allowed posts by subscription\r\n        const plan = u?.subscription?.plan || \"free\";\r\n        const planMap = { free: 1, bronze: 3, silver: 5, gold: Infinity };\r\n        let allowedByPlan = planMap[plan] ?? 1;\r\n\r\n        // follow-based allowances\r\n        const follows = (u?.follows || []).length;\r\n        let allowedByFollows = 0;\r\n        if (follows === 0) {\r\n          allowedByFollows = 1; // limited to 1 but time-window enforced on post\r\n        } else if (follows === 2) {\r\n          allowedByFollows = 2;\r\n        } else if (follows > 10) {\r\n          allowedByFollows = Infinity;\r\n        }\r\n\r\n        const allowed = allowedByFollows === 0 ? allowedByPlan : Math.max(allowedByPlan, allowedByFollows);\r\n        const remaining = allowed === Infinity ? Infinity : Math.max(0, allowed - used);\r\n        setQuotaInfo({ allowed, remaining, reason: \"\" });\r\n      } catch (e) {\r\n        // ignore\r\n      }\r\n    }\r\n    load();\r\n  }, []);\r\n\r\n  function handleUploadClick() {\r\n    fileInputRef.current.click();\r\n  }\r\n\r\n  function handleFileChange(e) {\r\n    let files = Array.from(e.target.files);\r\n    validateAndSetFiles(files);\r\n  }\r\n\r\n  function handleDrop(e) {\r\n    e.preventDefault();\r\n    setDragActive(false);\r\n    let files = Array.from(e.dataTransfer.files);\r\n    validateAndSetFiles(files);\r\n  }\r\n\r\n  function handleDragOver(e) {\r\n    e.preventDefault();\r\n    setDragActive(true);\r\n  }\r\n\r\n  function handleDragLeave(e) {\r\n    e.preventDefault();\r\n    setDragActive(false);\r\n  }\r\n\r\n  function validateAndSetFiles(files) {\r\n    setError(\"\");\r\n    let images = files.filter(f => f.type.startsWith(\"image\"));\r\n    let videos = files.filter(f => f.type.startsWith(\"video\"));\r\n    if (videos.length > 1 || (videos.length && images.length)) {\r\n      setError(\"You can upload up to 4 images or 1 video only.\");\r\n      return;\r\n    }\r\n    if (images.length > 4) {\r\n      setError(\"Maximum 4 images allowed.\");\r\n      return;\r\n    }\r\n    for (let img of images) {\r\n      if (img.size > 5 * 1024 * 1024) {\r\n        setError(\"Each image must be ≤ 5MB.\");\r\n        return;\r\n      }\r\n    }\r\n    for (let vid of videos) {\r\n      if (vid.size > 100 * 1024 * 1024) {\r\n        setError(\"Video must be ≤ 100MB.\");\r\n        return;\r\n      }\r\n    }\r\n    setMediaFiles([...images, ...videos]);\r\n  }\r\n\r\n  function removeMedia(idx) {\r\n    setMediaFiles(mediaFiles.filter((_, i) => i !== idx));\r\n  }\r\n\r\n  function handleCaptionChange(e) {\r\n    setCaption(e.target.value);\r\n  }\r\n\r\n  async function post() {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    // Check quota and time window for 0-followers\r\n    try {\r\n      const now = new Date();\r\n      const istNow = new Date(now.toLocaleString(\"en-US\", { timeZone: \"Asia/Kolkata\" }));\r\n      const hour = istNow.getHours();\r\n      const follows = (user?.follows || []).length;\r\n      if (follows === 0) {\r\n          // only 10:00 - 10:30 allowed\r\n          const minute = istNow.getMinutes();\r\n          if (!(hour === 10 && minute >= 0 && minute <= 30)) {\r\n          setError(\"Users who follow nobody can post only between 10:00-10:30 IST\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n      }\r\n      if (quotaInfo.remaining !== Infinity && quotaInfo.remaining <= 0) {\r\n        setError(\"You have reached your posting limit for today.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n    } catch (e) {\r\n      // proceed\r\n    }\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"text\", caption);\r\n      if (mediaFiles && mediaFiles.length) {\r\n        for (const f of mediaFiles) fd.append(\"media\", f);\r\n      }\r\n      const res = await API.post(\"/tweets\", fd);\r\n      // Show browser notification if backend signals notify or text contains keywords\r\n      try {\r\n        const shouldNotify = (res.data && res.data.notify) || (caption && /(cricket|science)/i.test(caption));\r\n        if (notificationsEnabled && shouldNotify && typeof Notification !== \"undefined\" && Notification.permission === \"granted\") {\r\n          new Notification(\"New Tweet\", { body: caption || \"New tweet posted\" });\r\n        }\r\n      } catch (e) {\r\n        console.debug(\"Notification error\", e);\r\n      }\r\n      setCaption(\"\");\r\n      setMediaFiles([]);\r\n      onPosted && onPosted();\r\n      // refresh quota\r\n      const res2 = await API.get(\"/auth/me\");\r\n      const tweetsRes = await API.get(\"/tweets\");\r\n      const all = tweetsRes.data || [];\r\n      const myId = res2.data.user?._id;\r\n      const today = new Date();\r\n      const istToday = new Date(today.toLocaleString(\"en-US\", { timeZone: \"Asia/Kolkata\" }));\r\n      const start = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 0, 0, 0);\r\n      const end = new Date(istToday.getFullYear(), istToday.getMonth(), istToday.getDate(), 23, 59, 59);\r\n      const used = all.filter(t => t.user?._id === myId && new Date(t.createdAt) >= start && new Date(t.createdAt) <= end).length;\r\n      const plan = res2.data.user?.subscription?.plan || \"free\";\r\n      const planMap = { free: 1, bronze: 3, silver: 5, gold: Infinity };\r\n      let allowed = planMap[plan] ?? 1;\r\n      const follows = (res2.data.user?.follows || []).length;\r\n      if (follows === 0) allowed = Math.min(allowed, 1);\r\n      else if (follows >= 2 && follows <= 10) allowed = Math.min(allowed, 2);\r\n      const remaining = allowed === Infinity ? Infinity : Math.max(0, allowed - used);\r\n      setTodayCount(used);\r\n      setQuotaInfo({ allowed, remaining, reason: \"\" });\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || err.message);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"composer bg-white rounded-xl shadow-lg p-4 flex flex-col gap-4 max-w-xl mx-auto\">\r\n      <div\r\n        className={`border-2 ${dragActive ? \"border-blue-400 bg-blue-50\" : \"border-dashed border-gray-300\"} rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition mb-2 relative`}\r\n        onClick={handleUploadClick}\r\n        onDrop={handleDrop}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        style={{ minHeight: \"120px\" }}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          multiple\r\n          accept=\"image/*,video/*\"\r\n          ref={fileInputRef}\r\n          style={{ display: \"none\" }}\r\n          onChange={handleFileChange}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          className=\"px-5 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition mb-2\"\r\n        >\r\n          Upload Media\r\n        </button>\r\n        <span className=\"text-gray-400 text-sm\">Drag & drop images (max 4) or 1 video here</span>\r\n      </div>\r\n      {error && <div className=\"text-red-500 text-sm mb-2\">{error}</div>}\r\n      {mediaFiles.length > 0 && (\r\n        <div className=\"mb-2\">\r\n          {/* Image grid or video preview */}\r\n          {mediaFiles[0].type.startsWith(\"image\") ? (\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              {mediaFiles.map((file, idx) => (\r\n                <div key={idx} className=\"relative group\">\r\n                  <img\r\n                    src={URL.createObjectURL(file)}\r\n                    alt=\"preview\"\r\n                    className=\"rounded-lg shadow border border-gray-200 object-cover w-full h-32\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={e => { e.stopPropagation(); removeMedia(idx); }}\r\n                    className=\"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow group-hover:scale-110 transition\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"relative\">\r\n              <video\r\n                src={URL.createObjectURL(mediaFiles[0])}\r\n                controls\r\n                className=\"rounded-lg shadow border border-gray-200 w-full h-48 object-cover\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={e => { e.stopPropagation(); removeMedia(0); }}\r\n                className=\"absolute top-2 right-2 bg-white/80 rounded-full p-1 text-gray-700 hover:text-red-500 shadow transition\"\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      <textarea\r\n        value={caption}\r\n        onChange={handleCaptionChange}\r\n        placeholder=\"Write a caption…\"\r\n        className=\"w-full rounded-2xl border border-gray-300 p-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-300 resize-none mb-2\"\r\n        rows={2}\r\n      ></textarea>\r\n      {/* Hashtag/@mention highlight preview */}\r\n      {caption && (\r\n        <div className=\"mb-2 text-base\">\r\n          {highlightCaption(caption)}\r\n        </div>\r\n      )}\r\n      {/* Quota display */}\r\n      <div className=\"text-sm text-gray-600 mb-2\">\r\n        {quotaInfo.allowed === Infinity ? (\r\n          <span>Plan: Unlimited tweets</span>\r\n        ) : (\r\n          <span>Today: {todayCount}/{quotaInfo.allowed} &mdash; Remaining: {quotaInfo.remaining}</span>\r\n        )}\r\n      </div>\r\n      <button\r\n        onClick={post}\r\n        disabled={\r\n          loading ||\r\n          (!caption.trim() && mediaFiles.length === 0) ||\r\n          (quotaInfo.remaining !== Infinity && quotaInfo.remaining <= 0)\r\n        }\r\n        className=\"self-end px-6 py-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-bold shadow hover:scale-105 transition flex items-center gap-2\"\r\n      >\r\n        {loading && (\r\n          <svg className=\"animate-spin h-5 w-5 text-white\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z\" />\r\n          </svg>\r\n        )}\r\n        Tweet\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACtE,MAAO,CAAAC,GAAG,KAAM,QAAQ,CACxB,MAAO,CAAAC,mBAAmB,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,QAAS,CAAAC,gBAAgBA,CAACC,IAAI,CAAE,CAC9B;AACA,KAAM,CAAAC,KAAK,CAAG,cAAc,CAC5B,KAAM,CAAAC,KAAK,CAAGF,IAAI,CAACG,KAAK,CAACF,KAAK,CAAC,CAC/B,MAAO,CAAAC,KAAK,CAACE,GAAG,CAAC,CAACC,IAAI,CAAEC,CAAC,GACvBL,KAAK,CAACM,IAAI,CAACF,IAAI,CAAC,cACZT,IAAA,SAAcY,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAEJ,IAAI,EAAhDC,CAAuD,CAAC,CACnED,IACN,CAAC,CACH,CAEA,cAAe,SAAS,CAAAK,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC/C,KAAM,CAAEE,OAAO,CAAEC,oBAAqB,CAAC,CAAGtB,UAAU,CAACE,mBAAmB,CAAC,CACzE,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC2B,UAAU,CAAEC,aAAa,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAAE;AAClD,KAAM,CAAC6B,KAAK,CAAEC,QAAQ,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC+B,OAAO,CAAEC,UAAU,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAiC,YAAY,CAAGlC,MAAM,CAAC,CAAC,CAC7B,KAAM,CAACmC,UAAU,CAAEC,aAAa,CAAC,CAAGnC,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACoC,IAAI,CAAEC,OAAO,CAAC,CAAGrC,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACsC,UAAU,CAAEC,aAAa,CAAC,CAAGvC,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACwC,SAAS,CAAEC,YAAY,CAAC,CAAGzC,QAAQ,CAAC,CAAE0C,OAAO,CAAE,CAAC,CAAEC,SAAS,CAAE,CAAC,CAAEC,MAAM,CAAE,EAAG,CAAC,CAAC,CAEpF3C,SAAS,CAAC,IAAM,CACd,cAAe,CAAA4C,IAAIA,CAAA,CAAG,CACpB,GAAI,KAAAC,eAAA,CAAAC,aAAA,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAA7C,GAAG,CAAC8C,GAAG,CAAC,UAAU,CAAC,CACrC,KAAM,CAAAC,CAAC,CAAGF,GAAG,CAACG,IAAI,CAACf,IAAI,CACvBC,OAAO,CAACa,CAAC,CAAC,CACV;AACA,KAAM,CAAAE,SAAS,CAAG,KAAM,CAAAjD,GAAG,CAAC8C,GAAG,CAAC,SAAS,CAAC,CAC1C,KAAM,CAAAI,GAAG,CAAGD,SAAS,CAACD,IAAI,EAAI,EAAE,CAChC,KAAM,CAAAG,IAAI,CAAGJ,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEK,GAAG,CACnB,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAD,IAAI,CAACD,KAAK,CAACG,cAAc,CAAC,OAAO,CAAE,CAAEC,QAAQ,CAAE,cAAe,CAAC,CAAC,CAAC,CACtF,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAJ,IAAI,CAACC,QAAQ,CAACI,WAAW,CAAC,CAAC,CAAEJ,QAAQ,CAACK,QAAQ,CAAC,CAAC,CAAEL,QAAQ,CAACM,OAAO,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAChG,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAAR,IAAI,CAACC,QAAQ,CAACI,WAAW,CAAC,CAAC,CAAEJ,QAAQ,CAACK,QAAQ,CAAC,CAAC,CAAEL,QAAQ,CAACM,OAAO,CAAC,CAAC,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CACjG,KAAM,CAAAE,IAAI,CAAGb,GAAG,CAACc,MAAM,CAACC,CAAC,OAAAC,OAAA,OAAI,EAAAA,OAAA,CAAAD,CAAC,CAAChC,IAAI,UAAAiC,OAAA,iBAANA,OAAA,CAAQd,GAAG,IAAKD,IAAI,EAAI,GAAI,CAAAG,IAAI,CAACW,CAAC,CAACE,SAAS,CAAC,EAAIT,KAAK,EAAI,GAAI,CAAAJ,IAAI,CAACW,CAAC,CAACE,SAAS,CAAC,EAAIL,GAAG,GAAC,CAACM,MAAM,CAC3HhC,aAAa,CAAC2B,IAAI,CAAC,CAEnB;AACA,KAAM,CAAAM,IAAI,CAAG,CAAAtB,CAAC,SAADA,CAAC,kBAAAJ,eAAA,CAADI,CAAC,CAAEuB,YAAY,UAAA3B,eAAA,iBAAfA,eAAA,CAAiB0B,IAAI,GAAI,MAAM,CAC5C,KAAM,CAAAE,OAAO,CAAG,CAAEC,IAAI,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAEC,QAAS,CAAC,CACjE,GAAI,CAAAC,aAAa,EAAAjC,aAAA,CAAG2B,OAAO,CAACF,IAAI,CAAC,UAAAzB,aAAA,UAAAA,aAAA,CAAI,CAAC,CAEtC;AACA,KAAM,CAAAkC,OAAO,CAAG,CAAC,CAAA/B,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAE+B,OAAO,GAAI,EAAE,EAAEV,MAAM,CACzC,GAAI,CAAAW,gBAAgB,CAAG,CAAC,CACxB,GAAID,OAAO,GAAK,CAAC,CAAE,CACjBC,gBAAgB,CAAG,CAAC,CAAE;AACxB,CAAC,IAAM,IAAID,OAAO,GAAK,CAAC,CAAE,CACxBC,gBAAgB,CAAG,CAAC,CACtB,CAAC,IAAM,IAAID,OAAO,CAAG,EAAE,CAAE,CACvBC,gBAAgB,CAAGH,QAAQ,CAC7B,CAEA,KAAM,CAAArC,OAAO,CAAGwC,gBAAgB,GAAK,CAAC,CAAGF,aAAa,CAAGG,IAAI,CAACC,GAAG,CAACJ,aAAa,CAAEE,gBAAgB,CAAC,CAClG,KAAM,CAAAvC,SAAS,CAAGD,OAAO,GAAKqC,QAAQ,CAAGA,QAAQ,CAAGI,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE1C,OAAO,CAAGwB,IAAI,CAAC,CAC/EzB,YAAY,CAAC,CAAEC,OAAO,CAAEC,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CAAC,CAClD,CAAE,MAAOyC,CAAC,CAAE,CACV;AAAA,CAEJ,CACAxC,IAAI,CAAC,CAAC,CACR,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAyC,iBAAiBA,CAAA,CAAG,CAC3BrD,YAAY,CAACsD,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CAEA,QAAS,CAAAC,gBAAgBA,CAACJ,CAAC,CAAE,CAC3B,GAAI,CAAAK,KAAK,CAAGC,KAAK,CAACC,IAAI,CAACP,CAAC,CAACQ,MAAM,CAACH,KAAK,CAAC,CACtCI,mBAAmB,CAACJ,KAAK,CAAC,CAC5B,CAEA,QAAS,CAAAK,UAAUA,CAACV,CAAC,CAAE,CACrBA,CAAC,CAACW,cAAc,CAAC,CAAC,CAClB7D,aAAa,CAAC,KAAK,CAAC,CACpB,GAAI,CAAAuD,KAAK,CAAGC,KAAK,CAACC,IAAI,CAACP,CAAC,CAACY,YAAY,CAACP,KAAK,CAAC,CAC5CI,mBAAmB,CAACJ,KAAK,CAAC,CAC5B,CAEA,QAAS,CAAAQ,cAAcA,CAACb,CAAC,CAAE,CACzBA,CAAC,CAACW,cAAc,CAAC,CAAC,CAClB7D,aAAa,CAAC,IAAI,CAAC,CACrB,CAEA,QAAS,CAAAgE,eAAeA,CAACd,CAAC,CAAE,CAC1BA,CAAC,CAACW,cAAc,CAAC,CAAC,CAClB7D,aAAa,CAAC,KAAK,CAAC,CACtB,CAEA,QAAS,CAAA2D,mBAAmBA,CAACJ,KAAK,CAAE,CAClC5D,QAAQ,CAAC,EAAE,CAAC,CACZ,GAAI,CAAAsE,MAAM,CAAGV,KAAK,CAACvB,MAAM,CAACkC,CAAC,EAAIA,CAAC,CAACC,IAAI,CAACC,UAAU,CAAC,OAAO,CAAC,CAAC,CAC1D,GAAI,CAAAC,MAAM,CAAGd,KAAK,CAACvB,MAAM,CAACkC,CAAC,EAAIA,CAAC,CAACC,IAAI,CAACC,UAAU,CAAC,OAAO,CAAC,CAAC,CAC1D,GAAIC,MAAM,CAACjC,MAAM,CAAG,CAAC,EAAKiC,MAAM,CAACjC,MAAM,EAAI6B,MAAM,CAAC7B,MAAO,CAAE,CACzDzC,QAAQ,CAAC,gDAAgD,CAAC,CAC1D,OACF,CACA,GAAIsE,MAAM,CAAC7B,MAAM,CAAG,CAAC,CAAE,CACrBzC,QAAQ,CAAC,2BAA2B,CAAC,CACrC,OACF,CACA,IAAK,GAAI,CAAA2E,GAAG,GAAI,CAAAL,MAAM,CAAE,CACtB,GAAIK,GAAG,CAACC,IAAI,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE,CAC9B5E,QAAQ,CAAC,2BAA2B,CAAC,CACrC,OACF,CACF,CACA,IAAK,GAAI,CAAA6E,GAAG,GAAI,CAAAH,MAAM,CAAE,CACtB,GAAIG,GAAG,CAACD,IAAI,CAAG,GAAG,CAAG,IAAI,CAAG,IAAI,CAAE,CAChC5E,QAAQ,CAAC,wBAAwB,CAAC,CAClC,OACF,CACF,CACAF,aAAa,CAAC,CAAC,GAAGwE,MAAM,CAAE,GAAGI,MAAM,CAAC,CAAC,CACvC,CAEA,QAAS,CAAAI,WAAWA,CAACC,GAAG,CAAE,CACxBjF,aAAa,CAACD,UAAU,CAACwC,MAAM,CAAC,CAAC2C,CAAC,CAAE9F,CAAC,GAAKA,CAAC,GAAK6F,GAAG,CAAC,CAAC,CACvD,CAEA,QAAS,CAAAE,mBAAmBA,CAAC1B,CAAC,CAAE,CAC9B3D,UAAU,CAAC2D,CAAC,CAACQ,MAAM,CAACmB,KAAK,CAAC,CAC5B,CAEA,cAAe,CAAAC,IAAIA,CAAA,CAAG,CACpBjF,UAAU,CAAC,IAAI,CAAC,CAChBF,QAAQ,CAAC,EAAE,CAAC,CACZ;AACA,GAAI,CACF,KAAM,CAAAoF,GAAG,CAAG,GAAI,CAAAzD,IAAI,CAAC,CAAC,CACtB,KAAM,CAAA0D,MAAM,CAAG,GAAI,CAAA1D,IAAI,CAACyD,GAAG,CAACvD,cAAc,CAAC,OAAO,CAAE,CAAEC,QAAQ,CAAE,cAAe,CAAC,CAAC,CAAC,CAClF,KAAM,CAAAwD,IAAI,CAAGD,MAAM,CAACE,QAAQ,CAAC,CAAC,CAC9B,KAAM,CAAApC,OAAO,CAAG,CAAC,CAAA7C,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6C,OAAO,GAAI,EAAE,EAAEV,MAAM,CAC5C,GAAIU,OAAO,GAAK,CAAC,CAAE,CACf;AACA,KAAM,CAAAqC,MAAM,CAAGH,MAAM,CAACI,UAAU,CAAC,CAAC,CAClC,GAAI,EAAEH,IAAI,GAAK,EAAE,EAAIE,MAAM,EAAI,CAAC,EAAIA,MAAM,EAAI,EAAE,CAAC,CAAE,CACnDxF,QAAQ,CAAC,+DAA+D,CAAC,CACzEE,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CACF,CACA,GAAIQ,SAAS,CAACG,SAAS,GAAKoC,QAAQ,EAAIvC,SAAS,CAACG,SAAS,EAAI,CAAC,CAAE,CAChEb,QAAQ,CAAC,gDAAgD,CAAC,CAC1DE,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CACF,CAAE,MAAOqD,CAAC,CAAE,CACV;AAAA,CAEF,GAAI,KAAAmC,eAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,cAAA,CAAAC,gBAAA,CACF,KAAM,CAAAC,EAAE,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CACzBD,EAAE,CAACE,MAAM,CAAC,MAAM,CAAEtG,OAAO,CAAC,CAC1B,GAAIE,UAAU,EAAIA,UAAU,CAAC4C,MAAM,CAAE,CACnC,IAAK,KAAM,CAAA8B,CAAC,GAAI,CAAA1E,UAAU,CAAEkG,EAAE,CAACE,MAAM,CAAC,OAAO,CAAE1B,CAAC,CAAC,CACnD,CACA,KAAM,CAAArD,GAAG,CAAG,KAAM,CAAA7C,GAAG,CAAC8G,IAAI,CAAC,SAAS,CAAEY,EAAE,CAAC,CACzC;AACA,GAAI,CACF,KAAM,CAAAG,YAAY,CAAIhF,GAAG,CAACG,IAAI,EAAIH,GAAG,CAACG,IAAI,CAAC8E,MAAM,EAAMxG,OAAO,EAAI,oBAAoB,CAACR,IAAI,CAACQ,OAAO,CAAE,CACrG,GAAID,oBAAoB,EAAIwG,YAAY,EAAI,MAAO,CAAAE,YAAY,GAAK,WAAW,EAAIA,YAAY,CAACC,UAAU,GAAK,SAAS,CAAE,CACxH,GAAI,CAAAD,YAAY,CAAC,WAAW,CAAE,CAAEE,IAAI,CAAE3G,OAAO,EAAI,kBAAmB,CAAC,CAAC,CACxE,CACF,CAAE,MAAO4D,CAAC,CAAE,CACVgD,OAAO,CAACC,KAAK,CAAC,oBAAoB,CAAEjD,CAAC,CAAC,CACxC,CACA3D,UAAU,CAAC,EAAE,CAAC,CACdE,aAAa,CAAC,EAAE,CAAC,CACjBN,QAAQ,EAAIA,QAAQ,CAAC,CAAC,CACtB;AACA,KAAM,CAAAiH,IAAI,CAAG,KAAM,CAAApI,GAAG,CAAC8C,GAAG,CAAC,UAAU,CAAC,CACtC,KAAM,CAAAG,SAAS,CAAG,KAAM,CAAAjD,GAAG,CAAC8C,GAAG,CAAC,SAAS,CAAC,CAC1C,KAAM,CAAAI,GAAG,CAAGD,SAAS,CAACD,IAAI,EAAI,EAAE,CAChC,KAAM,CAAAG,IAAI,EAAAkE,eAAA,CAAGe,IAAI,CAACpF,IAAI,CAACf,IAAI,UAAAoF,eAAA,iBAAdA,eAAA,CAAgBjE,GAAG,CAChC,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAD,IAAI,CAACD,KAAK,CAACG,cAAc,CAAC,OAAO,CAAE,CAAEC,QAAQ,CAAE,cAAe,CAAC,CAAC,CAAC,CACtF,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAJ,IAAI,CAACC,QAAQ,CAACI,WAAW,CAAC,CAAC,CAAEJ,QAAQ,CAACK,QAAQ,CAAC,CAAC,CAAEL,QAAQ,CAACM,OAAO,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAChG,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAAR,IAAI,CAACC,QAAQ,CAACI,WAAW,CAAC,CAAC,CAAEJ,QAAQ,CAACK,QAAQ,CAAC,CAAC,CAAEL,QAAQ,CAACM,OAAO,CAAC,CAAC,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CACjG,KAAM,CAAAE,IAAI,CAAGb,GAAG,CAACc,MAAM,CAACC,CAAC,OAAAoE,QAAA,OAAI,EAAAA,QAAA,CAAApE,CAAC,CAAChC,IAAI,UAAAoG,QAAA,iBAANA,QAAA,CAAQjF,GAAG,IAAKD,IAAI,EAAI,GAAI,CAAAG,IAAI,CAACW,CAAC,CAACE,SAAS,CAAC,EAAIT,KAAK,EAAI,GAAI,CAAAJ,IAAI,CAACW,CAAC,CAACE,SAAS,CAAC,EAAIL,GAAG,GAAC,CAACM,MAAM,CAC3H,KAAM,CAAAC,IAAI,CAAG,EAAAiD,gBAAA,CAAAc,IAAI,CAACpF,IAAI,CAACf,IAAI,UAAAqF,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBhD,YAAY,UAAAiD,qBAAA,iBAA5BA,qBAAA,CAA8BlD,IAAI,GAAI,MAAM,CACzD,KAAM,CAAAE,OAAO,CAAG,CAAEC,IAAI,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAEC,QAAS,CAAC,CACjE,GAAI,CAAArC,OAAO,EAAAiF,cAAA,CAAGjD,OAAO,CAACF,IAAI,CAAC,UAAAmD,cAAA,UAAAA,cAAA,CAAI,CAAC,CAChC,KAAM,CAAA1C,OAAO,CAAG,CAAC,EAAA2C,gBAAA,CAAAW,IAAI,CAACpF,IAAI,CAACf,IAAI,UAAAwF,gBAAA,iBAAdA,gBAAA,CAAgB3C,OAAO,GAAI,EAAE,EAAEV,MAAM,CACtD,GAAIU,OAAO,GAAK,CAAC,CAAEvC,OAAO,CAAGyC,IAAI,CAACsD,GAAG,CAAC/F,OAAO,CAAE,CAAC,CAAC,CAAC,IAC7C,IAAIuC,OAAO,EAAI,CAAC,EAAIA,OAAO,EAAI,EAAE,CAAEvC,OAAO,CAAGyC,IAAI,CAACsD,GAAG,CAAC/F,OAAO,CAAE,CAAC,CAAC,CACtE,KAAM,CAAAC,SAAS,CAAGD,OAAO,GAAKqC,QAAQ,CAAGA,QAAQ,CAAGI,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE1C,OAAO,CAAGwB,IAAI,CAAC,CAC/E3B,aAAa,CAAC2B,IAAI,CAAC,CACnBzB,YAAY,CAAC,CAAEC,OAAO,CAAEC,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CAAC,CAClD,CAAE,MAAO8F,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ9G,QAAQ,CAAC,EAAA6G,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcxF,IAAI,UAAAyF,kBAAA,iBAAlBA,kBAAA,CAAoBE,OAAO,GAAIJ,GAAG,CAACI,OAAO,CAAC,CACtD,CACA9G,UAAU,CAAC,KAAK,CAAC,CACnB,CAEA,mBACExB,KAAA,QAAKU,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAC9FX,KAAA,QACEU,SAAS,aAAA6H,MAAA,CAAc7G,UAAU,CAAG,4BAA4B,CAAG,+BAA+B,qGAAoG,CACtM8G,OAAO,CAAE1D,iBAAkB,CAC3B2D,MAAM,CAAElD,UAAW,CACnBmD,UAAU,CAAEhD,cAAe,CAC3BiD,WAAW,CAAEhD,eAAgB,CAC7BiD,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAAAlI,QAAA,eAE9Bb,IAAA,UACEgG,IAAI,CAAC,MAAM,CACXgD,QAAQ,MACRC,MAAM,CAAC,iBAAiB,CACxBC,GAAG,CAAEvH,YAAa,CAClBmH,KAAK,CAAE,CAAEK,OAAO,CAAE,MAAO,CAAE,CAC3BC,QAAQ,CAAEjE,gBAAiB,CAC5B,CAAC,cACFnF,IAAA,WACEgG,IAAI,CAAC,QAAQ,CACbpF,SAAS,CAAC,+HAA+H,CAAAC,QAAA,CAC1I,cAED,CAAQ,CAAC,cACTb,IAAA,SAAMY,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,4CAA0C,CAAM,CAAC,EACtF,CAAC,CACLU,KAAK,eAAIvB,IAAA,QAAKY,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEU,KAAK,CAAM,CAAC,CACjEF,UAAU,CAAC4C,MAAM,CAAG,CAAC,eACpBjE,IAAA,QAAKY,SAAS,CAAC,MAAM,CAAAC,QAAA,CAElBQ,UAAU,CAAC,CAAC,CAAC,CAAC2E,IAAI,CAACC,UAAU,CAAC,OAAO,CAAC,cACrCjG,IAAA,QAAKY,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpCQ,UAAU,CAACb,GAAG,CAAC,CAAC6I,IAAI,CAAE9C,GAAG,gBACxBrG,KAAA,QAAeU,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eACvCb,IAAA,QACEsJ,GAAG,CAAEC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAE,CAC/BI,GAAG,CAAC,SAAS,CACb7I,SAAS,CAAC,mEAAmE,CAC9E,CAAC,cACFZ,IAAA,WACEgG,IAAI,CAAC,QAAQ,CACb0C,OAAO,CAAE3D,CAAC,EAAI,CAAEA,CAAC,CAAC2E,eAAe,CAAC,CAAC,CAAEpD,WAAW,CAACC,GAAG,CAAC,CAAE,CAAE,CACzD3F,SAAS,CAAC,8HAA8H,CAAAC,QAAA,CACzI,MAED,CAAQ,CAAC,GAZD0F,GAaL,CACN,CAAC,CACC,CAAC,cAENrG,KAAA,QAAKU,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBb,IAAA,UACEsJ,GAAG,CAAEC,GAAG,CAACC,eAAe,CAACnI,UAAU,CAAC,CAAC,CAAC,CAAE,CACxCsI,QAAQ,MACR/I,SAAS,CAAC,mEAAmE,CAC9E,CAAC,cACFZ,IAAA,WACEgG,IAAI,CAAC,QAAQ,CACb0C,OAAO,CAAE3D,CAAC,EAAI,CAAEA,CAAC,CAAC2E,eAAe,CAAC,CAAC,CAAEpD,WAAW,CAAC,CAAC,CAAC,CAAE,CAAE,CACvD1F,SAAS,CAAC,wGAAwG,CAAAC,QAAA,CACnH,MAED,CAAQ,CAAC,EACN,CACN,CACE,CACN,cACDb,IAAA,aACE0G,KAAK,CAAEvF,OAAQ,CACfiI,QAAQ,CAAE3C,mBAAoB,CAC9BmD,WAAW,CAAC,uBAAkB,CAC9BhJ,SAAS,CAAC,8HAA8H,CACxIiJ,IAAI,CAAE,CAAE,CACC,CAAC,CAEX1I,OAAO,eACNnB,IAAA,QAAKY,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BV,gBAAgB,CAACgB,OAAO,CAAC,CACvB,CACN,cAEDnB,IAAA,QAAKY,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACxCqB,SAAS,CAACE,OAAO,GAAKqC,QAAQ,cAC7BzE,IAAA,SAAAa,QAAA,CAAM,wBAAsB,CAAM,CAAC,cAEnCX,KAAA,SAAAW,QAAA,EAAM,SAAO,CAACmB,UAAU,CAAC,GAAC,CAACE,SAAS,CAACE,OAAO,CAAC,qBAAoB,CAACF,SAAS,CAACG,SAAS,EAAO,CAC7F,CACE,CAAC,cACNnC,KAAA,WACEwI,OAAO,CAAE/B,IAAK,CACdmD,QAAQ,CACNrI,OAAO,EACN,CAACN,OAAO,CAAC4I,IAAI,CAAC,CAAC,EAAI1I,UAAU,CAAC4C,MAAM,GAAK,CAAE,EAC3C/B,SAAS,CAACG,SAAS,GAAKoC,QAAQ,EAAIvC,SAAS,CAACG,SAAS,EAAI,CAC7D,CACDzB,SAAS,CAAC,2JAA2J,CAAAC,QAAA,EAEpKY,OAAO,eACNvB,KAAA,QAAKU,SAAS,CAAC,iCAAiC,CAACoJ,OAAO,CAAC,WAAW,CAAAnJ,QAAA,eAClEb,IAAA,WAAQY,SAAS,CAAC,YAAY,CAACqJ,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,IAAI,CAAC,MAAM,CAAE,CAAC,cAC1GtK,IAAA,SAAMY,SAAS,CAAC,YAAY,CAAC0J,IAAI,CAAC,cAAc,CAACC,CAAC,CAAC,6CAA6C,CAAE,CAAC,EAChG,CACN,CAAC,OAEJ,EAAQ,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}