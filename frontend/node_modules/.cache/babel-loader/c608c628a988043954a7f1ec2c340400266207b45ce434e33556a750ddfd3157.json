{"ast":null,"code":"import React,{useState}from\"react\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AuthForm(_ref){let{onAuth}=_ref;const[mode,setMode]=useState(\"login\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[name,setName]=useState(\"\");const[loading,setLoading]=useState(false);const[showPassword,setShowPassword]=useState(false);const[error,setError]=useState(\"\");function validate(){if(!email)return\"Email is required.\";if(!/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(email))return\"Enter a valid email address.\";if(!password)return\"Password is required.\";if(password.length<6)return\"Password must be at least 6 characters.\";if(mode===\"signup\"&&!name)return\"Name is required.\";return\"\";}async function handleSubmit(e){e.preventDefault();setError(\"\");const validationError=validate();if(validationError){setError(validationError);return;}setLoading(true);try{if(mode===\"login\"){const response=await API.post(\"/auth/login\",{email,password});localStorage.setItem(\"token\",response.data.token);onAuth(response.data.user);}else{await API.post(\"/auth/register\",{name,email,password});alert(\"Registration successful! Please log in.\");setMode(\"login\");}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message);}setLoading(false);}return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form card\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\",color:\"#1d9bf0\"},children:\"Twiller\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",style:{width:\"100%\",background:\"#fff\",color:\"#444\",border:\"1.5px solid #e6ecf0\",borderRadius:22,padding:\"10px 0\",fontWeight:600,fontSize:\"1.05rem\",marginBottom:14,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:10,cursor:\"pointer\",boxShadow:\"0 1px 4px rgba(29,155,240,0.07)\"},onClick:()=>window.location.href=\"http://localhost:5000/auth/google\",title:\"Sign in with Google\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://www.svgrepo.com/show/475656/google-color.svg\",alt:\"Google\",style:{width:22,height:22,marginRight:8}}),\"Sign in with Google\"]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#d32f2f\",marginBottom:10,textAlign:\"center\",fontWeight:500},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[mode===\"signup\"&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name (Gmail or Username)\",value:name,onChange:e=>setName(e.target.value),required:true,style:{marginBottom:8}}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:{marginBottom:8}}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"Password (min 6 chars)\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"password-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"password-eye-btn\",onClick:()=>setShowPassword(v=>!v),tabIndex:-1,\"aria-label\":showPassword?\"Hide password\":\"Show password\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://www.svgrepo.com/show/532502/eye.svg\",alt:\"Show/Hide\",style:{width:22,height:22}})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{width:\"100%\",marginBottom:8},children:loading?\"Please wait...\":mode===\"login\"?\"Login\":\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\"},children:mode===\"login\"?/*#__PURE__*/_jsxs(_Fragment,{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMode(\"signup\"),style:{color:\"#1d9bf0\",background:\"none\",border:\"none\",cursor:\"pointer\"},children:\"Sign Up\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMode(\"login\"),style:{color:\"#1d9bf0\",background:\"none\",border:\"none\",cursor:\"pointer\"},children:\"Login\"})]})})]});}","map":{"version":3,"names":["React","useState","API","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuthForm","_ref","onAuth","mode","setMode","email","setEmail","password","setPassword","name","setName","loading","setLoading","showPassword","setShowPassword","error","setError","validate","test","length","handleSubmit","e","preventDefault","validationError","response","post","localStorage","setItem","data","token","user","alert","err","_err$response","_err$response$data","message","className","children","style","textAlign","color","type","width","background","border","borderRadius","padding","fontWeight","fontSize","marginBottom","display","alignItems","justifyContent","gap","cursor","boxShadow","onClick","window","location","href","title","src","alt","height","marginRight","onSubmit","placeholder","value","onChange","target","required","v","tabIndex","disabled"],"sources":["C:/Users/itsmu/Downloads/twiller_complete_project/frontend/src/components/AuthForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport API from \"../api\";\r\n\r\nexport default function AuthForm({ onAuth }) {\r\n  const [mode, setMode] = useState(\"login\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  function validate() {\r\n  if (!email) return \"Email is required.\";\r\n  if (!/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(email)) return \"Enter a valid email address.\";\r\n  if (!password) return \"Password is required.\";\r\n  if (password.length < 6) return \"Password must be at least 6 characters.\";\r\n  if (mode === \"signup\" && !name) return \"Name is required.\";\r\n  return \"\";\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n  setError(\"\");\r\n    const validationError = validate();\r\n    if (validationError) {\r\n      setError(validationError);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (mode === \"login\") {\r\n        const response = await API.post(\"/auth/login\", { email, password });\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        onAuth(response.data.user);\r\n      } else {\r\n        await API.post(\"/auth/register\", { name, email, password });\r\n        alert(\"Registration successful! Please log in.\");\r\n        setMode(\"login\");\r\n      }\r\n    } catch (err) {\r\n  setError(err.response?.data?.message || err.message);\r\n    }\r\n  setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-form card\">\r\n      <h2 style={{textAlign:\"center\", color:\"#1d9bf0\"}}>Twiller</h2>\r\n      <button\r\n        type=\"button\"\r\n        style={{\r\n          width: \"100%\",\r\n          background: \"#fff\",\r\n          color: \"#444\",\r\n          border: \"1.5px solid #e6ecf0\",\r\n          borderRadius: 22,\r\n          padding: \"10px 0\",\r\n          fontWeight: 600,\r\n          fontSize: \"1.05rem\",\r\n          marginBottom: 14,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          gap: 10,\r\n          cursor: \"pointer\",\r\n          boxShadow: \"0 1px 4px rgba(29,155,240,0.07)\"\r\n        }}\r\n        onClick={() => window.location.href = \"http://localhost:5000/auth/google\"}\r\n        title=\"Sign in with Google\"\r\n      >\r\n        <img src=\"https://www.svgrepo.com/show/475656/google-color.svg\" alt=\"Google\" style={{width:22, height:22, marginRight:8}} />\r\n        Sign in with Google\r\n      </button>\r\n      {error && <div style={{color:\"#d32f2f\", marginBottom:10, textAlign:\"center\", fontWeight:500}}>{error}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        {mode === \"signup\" && (\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Name (Gmail or Username)\"\r\n            value={name}\r\n            onChange={e => setName(e.target.value)}\r\n            required\r\n            style={{marginBottom:8}}\r\n          />\r\n        )}\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={e => setEmail(e.target.value)}\r\n          required\r\n          style={{marginBottom:8}}\r\n        />\r\n        <div className=\"password-input-wrapper\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Password (min 6 chars)\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n            required\r\n            className=\"password-input\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"password-eye-btn\"\r\n            onClick={()=>setShowPassword(v=>!v)}\r\n            tabIndex={-1}\r\n            aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n          >\r\n            <img src=\"https://www.svgrepo.com/show/532502/eye.svg\" alt=\"Show/Hide\" style={{width:22, height:22}} />\r\n          </button>\r\n        </div>\r\n        <button type=\"submit\" disabled={loading} style={{width:\"100%\",marginBottom:8}}>\r\n          {loading ? \"Please wait...\" : mode === \"login\" ? \"Login\" : \"Sign Up\"}\r\n        </button>\r\n      </form>\r\n      <div style={{textAlign:\"center\"}}>\r\n        {mode === \"login\" ? (\r\n          <>\r\n            {\"Don't have an account? \"}\r\n            <button onClick={()=>setMode(\"signup\")} style={{color:\"#1d9bf0\",background:\"none\",border:\"none\",cursor:\"pointer\"}}>Sign Up</button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            {\"Already have an account? \"}\r\n            <button onClick={()=>setMode(\"login\")} style={{color:\"#1d9bf0\",background:\"none\",border:\"none\",cursor:\"pointer\"}}>Login</button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}