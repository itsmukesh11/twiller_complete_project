{"ast":null,"code":"import React,{useState}from\"react\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TweetCard(_ref){var _tweet$likes,_tweet$comments,_tweet$user,_tweet$user2,_tweet$user3,_tweet$user3$email;let{tweet}=_ref;const[likes,setLikes]=useState(((_tweet$likes=tweet.likes)===null||_tweet$likes===void 0?void 0:_tweet$likes.length)||0);const[shares,setShares]=useState(tweet.shares||0);const[commentsCount,setCommentsCount]=useState(((_tweet$comments=tweet.comments)===null||_tweet$comments===void 0?void 0:_tweet$comments.length)||0);async function like(){try{const res=await API.post(\"/tweets/\".concat(tweet._id,\"/like\"));setLikes(res.data.likes);}catch(e){console.debug(e);}}async function share(){try{var _navigator$clipboard;const res=await API.post(\"/tweets/\".concat(tweet._id,\"/share\"));setShares(res.data.shares);// Optionally copy link\nconst link=\"\".concat(window.location.origin,\"/?shared=\").concat(tweet._id);(_navigator$clipboard=navigator.clipboard)===null||_navigator$clipboard===void 0?void 0:_navigator$clipboard.writeText(link);alert(\"Link copied to clipboard\");}catch(e){console.debug(e);}}async function comment(){const text=prompt(\"Write a comment\");if(!text)return;try{const res=await API.post(\"/tweets/\".concat(tweet._id,\"/comment\"),{text});setCommentsCount(res.data.comments.length);}catch(e){console.debug(e);}}const apiBase=(process.env.REACT_APP_API_URL||\"http://localhost:5000/api\").replace(/\\/api$/,\"\");return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-sm rounded-lg p-4 hover:bg-gray-50 transition flex flex-col gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-1\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-9 h-9 rounded-full bg-gray-200\",src:((_tweet$user=tweet.user)===null||_tweet$user===void 0?void 0:_tweet$user.avatar)||\"https://abs.twimg.com/sticky/default_profile_images/default_profile_400x400.png\",alt:\"avatar\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:(_tweet$user2=tweet.user)===null||_tweet$user2===void 0?void 0:_tweet$user2.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-gray-500\",children:[\"@\",(_tweet$user3=tweet.user)===null||_tweet$user3===void 0?void 0:(_tweet$user3$email=_tweet$user3.email)===null||_tweet$user3$email===void 0?void 0:_tweet$user3$email.split(\"@\")[0]]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-gray-400\",children:[\"\\xB7 \",new Date(tweet.createdAt).toLocaleString()]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-base text-gray-800 mb-2\",children:tweet.text}),tweet.audioUrl&&/*#__PURE__*/_jsx(\"audio\",{controls:true,className:\"w-full mt-2\",children:/*#__PURE__*/_jsx(\"source\",{src:\"\".concat(apiBase).concat(tweet.audioUrl),type:tweet.audioUrl.endsWith(\".webm\")?\"audio/webm\":\"audio/mpeg\"})}),tweet.mediaUrls&&tweet.mediaUrls.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:tweet.mediaUrls.map((m,i)=>m.endsWith(\".mp4\")||m.endsWith(\".webm\")?/*#__PURE__*/_jsx(\"video\",{controls:true,className:\"w-full rounded-lg mb-2\",children:/*#__PURE__*/_jsx(\"source\",{src:m.startsWith(\"http\")?m:\"\".concat(apiBase).concat(m)})},i):/*#__PURE__*/_jsx(\"img\",{src:m.startsWith(\"http\")?m:\"\".concat(apiBase).concat(m),alt:\"media-\".concat(i),className:\"w-full rounded-lg mb-2 object-cover\"},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-8 mt-2 text-gray-500\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:like,className:\"flex items-center gap-1 hover:text-blue-500 transition\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"like\",children:\"\\u2764\\uFE0F\"}),\" \",likes]}),/*#__PURE__*/_jsxs(\"button\",{onClick:comment,className:\"flex items-center gap-1 hover:text-blue-500 transition\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"comment\",children:\"\\uD83D\\uDCAC\"}),\" \",commentsCount]}),/*#__PURE__*/_jsxs(\"button\",{onClick:share,className:\"flex items-center gap-1 hover:text-blue-500 transition\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"share\",children:\"\\uD83D\\uDD17\"}),\" \",shares]})]})]});}","map":{"version":3,"names":["React","useState","API","jsx","_jsx","jsxs","_jsxs","TweetCard","_ref","_tweet$likes","_tweet$comments","_tweet$user","_tweet$user2","_tweet$user3","_tweet$user3$email","tweet","likes","setLikes","length","shares","setShares","commentsCount","setCommentsCount","comments","like","res","post","concat","_id","data","e","console","debug","share","_navigator$clipboard","link","window","location","origin","navigator","clipboard","writeText","alert","comment","text","prompt","apiBase","process","env","REACT_APP_API_URL","replace","className","children","src","user","avatar","alt","name","email","split","Date","createdAt","toLocaleString","audioUrl","controls","type","endsWith","mediaUrls","map","m","i","startsWith","onClick","role"],"sources":["C:/Users/itsmu/Downloads/twiller_complete_project/frontend/src/components/TweetCard.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport API from \"../api\";\r\n\r\nexport default function TweetCard({ tweet }) {\r\n  const [likes, setLikes] = useState(tweet.likes?.length || 0);\r\n  const [shares, setShares] = useState(tweet.shares || 0);\r\n  const [commentsCount, setCommentsCount] = useState(tweet.comments?.length || 0);\r\n\r\n  async function like() {\r\n    try {\r\n      const res = await API.post(`/tweets/${tweet._id}/like`);\r\n      setLikes(res.data.likes);\r\n    } catch (e) {\r\n      console.debug(e);\r\n    }\r\n  }\r\n\r\n  async function share() {\r\n    try {\r\n      const res = await API.post(`/tweets/${tweet._id}/share`);\r\n  setShares(res.data.shares);\r\n  // Optionally copy link\r\n  const link = `${window.location.origin}/?shared=${tweet._id}`;\r\n  navigator.clipboard?.writeText(link);\r\n  alert(\"Link copied to clipboard\");\r\n    } catch (e) {\r\n      console.debug(e);\r\n    }\r\n  }\r\n\r\n  async function comment() {\r\n    const text = prompt(\"Write a comment\");\r\n    if (!text) return;\r\n    try {\r\n      const res = await API.post(`/tweets/${tweet._id}/comment`, { text });\r\n      setCommentsCount(res.data.comments.length);\r\n    } catch (e) {\r\n      console.debug(e);\r\n    }\r\n  }\r\n\r\n  const apiBase = (process.env.REACT_APP_API_URL || \"http://localhost:5000/api\").replace(/\\/api$/, \"\");\r\n\r\n  return (\r\n    <div className=\"bg-white shadow-sm rounded-lg p-4 hover:bg-gray-50 transition flex flex-col gap-2\">\r\n      <div className=\"flex items-center gap-3 mb-1\">\r\n        <img className=\"w-9 h-9 rounded-full bg-gray-200\" src={tweet.user?.avatar || \"https://abs.twimg.com/sticky/default_profile_images/default_profile_400x400.png\"} alt=\"avatar\" />\r\n        <div>\r\n          <span className=\"font-bold\">{tweet.user?.name}</span>\r\n          <span className=\"ml-2 text-xs text-gray-500\">@{tweet.user?.email?.split(\"@\")[0]}</span>\r\n          <span className=\"ml-2 text-xs text-gray-400\">¬∑ {new Date(tweet.createdAt).toLocaleString()}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"text-base text-gray-800 mb-2\">{tweet.text}</div>\r\n      {tweet.audioUrl && (\r\n        <audio controls className=\"w-full mt-2\">\r\n          <source src={`${apiBase}${tweet.audioUrl}`} type={tweet.audioUrl.endsWith(\".webm\") ? \"audio/webm\" : \"audio/mpeg\"} />\r\n        </audio>\r\n      )}\r\n      {tweet.mediaUrls && tweet.mediaUrls.length > 0 && (\r\n        <div className=\"mt-2\">\r\n          {tweet.mediaUrls.map((m, i) => (\r\n            m.endsWith(\".mp4\") || m.endsWith(\".webm\") ? (\r\n              <video key={i} controls className=\"w-full rounded-lg mb-2\">\r\n                <source src={m.startsWith(\"http\") ? m : `${apiBase}${m}`} />\r\n              </video>\r\n            ) : (\r\n              <img key={i} src={m.startsWith(\"http\") ? m : `${apiBase}${m}`} alt={`media-${i}`} className=\"w-full rounded-lg mb-2 object-cover\" />\r\n            )\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div className=\"flex gap-8 mt-2 text-gray-500\">\r\n        <button onClick={like} className=\"flex items-center gap-1 hover:text-blue-500 transition\"><span role=\"img\" aria-label=\"like\">‚ù§Ô∏è</span> {likes}</button>\r\n        <button onClick={comment} className=\"flex items-center gap-1 hover:text-blue-500 transition\"><span role=\"img\" aria-label=\"comment\">üí¨</span> {commentsCount}</button>\r\n        <button onClick={share} className=\"flex items-center gap-1 hover:text-blue-500 transition\"><span role=\"img\" aria-label=\"share\">üîó</span> {shares}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}